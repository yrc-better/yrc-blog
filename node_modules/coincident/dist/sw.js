var e=Promise.withResolvers.bind(Promise);const[t,n]=((t=e=>e)=>{const n=new Map;let s=0;return[()=>{let a;do{a=t(s++)}while(n.has(a));const o=e();return n.set(a,o),[a,o.promise]},(e,t,s)=>{const a=n.get(e);n.delete(e),s?a?.reject(s):a?.resolve(t)}]})(),{stringify:s}=JSON,a=e=>new Response(`[${e.join(",")}]`),o=e=>new Response(s(e)),i=`${location.href}?sabayon`,r=new BroadcastChannel("dc78209b-186c-4f83-80e9-406becb7d9f3");r.onmessage=e=>n.apply(null,e.data),addEventListener("activate",e=>e.waitUntil(clients.claim())),addEventListener("install",()=>skipWaiting()),addEventListener("fetch",e=>{const{request:n}=e;"POST"===n.method&&n.url===i&&(e.stopImmediatePropagation(),e.preventDefault(),e.respondWith(n.json().then(([e,n])=>{const[s,i]=t();return r.postMessage([s,e,n]),i.then(a,o)},o)))});
